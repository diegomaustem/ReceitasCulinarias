generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Usuario {
  id Int @id @default(autoincrement())
  nome String? @db.VarChar(100)
  login String @unique @db.VarChar(100)
  senha String @db.VarChar(255)
  criadoEm DateTime @default(now()) @map("criado_em")
  alteradoEm DateTime @updatedAt @map("alterado_em")
  receitas Receita[]

  @@map("usuarios")
}
model Categoria {
  id Int @id @default(autoincrement())
  nome String? @unique @db.VarChar(100)
  criadoEm DateTime @default(now()) @map("criado_em")
  alteradoEm DateTime @updatedAt @map("alterado_em")
  receitas Receita[]

  @@map("categorias")
}
model Receita {
  id Int @id @default(autoincrement())
  idUsuarios Int @map("id_usuarios")
  idCategorias Int? @map("id_categorias")
  nome String? @db.VarChar(100)
  tempoPreparoMinutos Int? @map("tempo_preparo_minutos") 
  porcoes Int? @default(1)
  modoPreparo String @db.Text @map("modo_preparo")
  ingredientes String? @db.Text
  criadoEm DateTime @default(now()) @map("criado_em")
  alteradoEm DateTime @updatedAt @map("alterado_em")

  usuario Usuario @relation(fields: [idUsuarios], references: [id], onDelete: Restrict, onUpdate: Cascade)
  categoria Categoria? @relation(fields: [idCategorias], references: [id], onDelete: Cascade, onUpdate: Cascade)
  
  @@map("receitas")
}